<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>UPDATE ALIP AI</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #6c5ce7;
      --secondary: #a29bfe;
      --accent: #00cec9;
      --dark: #121212;
      --light: #f5f6fa;
      --success: #00b894;
      --danger: #d63031;
      --warning: #fdcb6e;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      background: linear-gradient(135deg, var(--dark) 0%, #1a1a2e 100%);
      color: var(--light);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 15px;
      position: relative;
      overflow-x: hidden;
    }

    .bg-animation {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
    }

    .bg-animation span {
      position: absolute;
      width: 20px;
      height: 20px;
      background: var(--primary);
      opacity: 0.1;
      border-radius: 50%;
      animation: float 15s linear infinite;
      bottom: -50px;
    }

    @keyframes float {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 0.1;
      }
      100% {
        transform: translateY(-100vh) rotate(720deg);
        opacity: 0;
      }
    }

    .container {
      width: 100%;
      max-width: 500px;
      margin: 0 auto;
      z-index: 1;
    }

    .tabs {
      display: flex;
      margin-bottom: 15px;
      background: rgba(25, 25, 35, 0.7);
      border-radius: 10px;
      overflow: hidden;
    }

    .tab {
      padding: 12px;
      flex: 1;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 14px;
      min-height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .tab.active {
      background: var(--primary);
      font-weight: bold;
    }

    .tab-content {
      display: none;
      animation: fadeIn 0.5s ease;
    }

    .tab-content.active {
      display: block;
    }

    .header {
      text-align: center;
      margin-bottom: 20px;
    }

    .logo {
      width: 80px;
      height: 80px;
      margin: 0 auto 12px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      box-shadow: 0 0 15px rgba(108, 92, 231, 0.5);
      animation: pulse 2s infinite;
      overflow: hidden;
      border: 3px solid var(--primary);
    }

    .logo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    @keyframes pulse {
      0% {
        box-shadow: 0 0 15px rgba(108, 92, 231, 0.5);
      }
      50% {
        box-shadow: 0 0 25px rgba(108, 92, 231, 0.8);
      }
      100% {
        box-shadow: 0 0 15px rgba(108, 92, 231, 0.5);
      }
    }

    .header h1 {
      font-size: 20px;
      margin-bottom: 8px;
      background: linear-gradient(to right, var(--primary), var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .header p {
      color: var(--secondary);
      font-size: 13px;
    }

    .box {
      background: rgba(25, 25, 35, 0.9);
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
      margin-bottom: 15px;
      backdrop-filter: blur(10px);
    }

    .input-group {
      margin-bottom: 15px;
      text-align: left;
    }

    .input-group label {
      display: block;
      margin-bottom: 6px;
      font-weight: 500;
      color: var(--secondary);
      font-size: 14px;
    }

    .input-field {
      width: 100%;
      padding: 14px 16px;
      border-radius: 8px;
      border: 2px solid rgba(108, 92, 231, 0.3);
      background: rgba(18, 18, 26, 0.7);
      color: var(--light);
      font-size: 16px;
      transition: all 0.3s ease;
      -webkit-appearance: none;
    }

    .input-field:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.2);
    }

    .btn {
      width: 100%;
      padding: 16px;
      border: none;
      border-radius: 8px;
      background: linear-gradient(to right, var(--primary), var(--accent));
      color: white;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      min-height: 50px;
    }

    .btn:hover, .btn:active {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(108, 92, 231, 0.4);
    }

    .btn-success {
      background: linear-gradient(to right, var(--success), #00d8a7);
    }

    .btn-danger {
      background: linear-gradient(to right, var(--danger), #ff7675);
    }

    .download-link {
      display: block;
      margin-top: 15px;
      padding: 14px;
      border-radius: 8px;
      background: linear-gradient(to right, var(--success), #00d8a7);
      color: white;
      text-align: center;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0, 184, 148, 0.4);
      animation: pulse 2s infinite;
      min-height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .download-link:hover, .download-link:active {
      transform: translateY(-2px);
      box-shadow: 0 7px 20px rgba(0, 184, 148, 0.5);
    }

    .api-keys-list {
      margin-top: 15px;
      background: rgba(18, 18, 26, 0.5);
      border-radius: 8px;
      overflow: hidden;
      max-height: 300px;
      overflow-y: auto;
    }

    .api-keys-list::-webkit-scrollbar {
      width: 4px;
    }

    .api-keys-list::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 2px;
    }

    .api-keys-list::-webkit-scrollbar-thumb {
      background: var(--primary);
      border-radius: 2px;
    }

    .api-keys-list::-webkit-scrollbar-thumb:hover {
      background: var(--secondary);
    }

    .api-key-item {
      padding: 12px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .api-key-item:last-child {
      border-bottom: none;
    }

    .key-info {
      flex: 1;
      min-width: 0;
      overflow: hidden;
    }

    .key-value {
      font-family: monospace;
      font-size: 13px;
      margin-bottom: 4px;
      word-break: break-all;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .key-meta {
      font-size: 11px;
      color: var(--secondary);
    }

    .key-actions {
      display: flex;
      gap: 6px;
    }

    .key-btn {
      padding: 8px 10px;
      border: none;
      border-radius: 5px;
      background: var(--primary);
      color: white;
      cursor: pointer;
      font-size: 13px;
      min-width: 40px;
      min-height: 34px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .footer {
      margin-top: 20px;
      text-align: center;
      color: var(--secondary);
      font-size: 12px;
    }

    .notification {
      position: fixed;
      top: 15px;
      right: 15px;
      left: 15px;
      padding: 12px 16px;
      border-radius: 8px;
      background: var(--danger);
      color: white;
      box-shadow: 0 5px 15px rgba(214, 48, 49, 0.4);
      transform: translateY(-100px);
      transition: transform 0.3s ease;
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 10px;
      word-break: break-word;
    }

    .notification.success {
      background: var(--success);
    }

    .notification.show {
      transform: translateY(0);
    }

    .admin-only {
      display: none;
    }

    .admin-only.visible {
      display: block;
    }

    .progress-bar {
      width: 100%;
      height: 6px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 3px;
      margin-top: 15px;
      overflow: hidden;
      display: none;
    }

    .progress {
      height: 100%;
      background: linear-gradient(to right, var(--accent), var(--primary));
      border-radius: 3px;
      width: 0%;
      transition: width 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideIn {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    /* Mobile-specific adjustments */
    @media (max-width: 480px) {
      .container {
        padding: 0 5px;
      }
      
      .header h1 {
        font-size: 18px;
      }
      
      .box {
        padding: 15px;
      }
      
      .input-field {
        padding: 12px 14px;
      }
      
      .btn, .download-link {
        padding: 14px;
        font-size: 15px;
      }
      
      .api-key-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      
      .key-actions {
        align-self: flex-end;
      }
      
      .tabs {
        flex-direction: column;
      }
      
      .tab {
        padding: 10px;
      }
    }

    @media (max-width: 350px) {
      .header h1 {
        font-size: 16px;
      }
      
      .header p {
        font-size: 12px;
      }
      
      .input-field, .btn, .download-link {
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <div class="bg-animation" id="bg-animation"></div>

  <div class="container">
    <div class="header">
      <div class="logo">
        <img src="https://img1.pixhost.to/images/8184/634292555_media.jpg" alt="Alip AI Logo">
      </div>
      <h1>UPDATE BOT ALIP AI</h1>
      <p>Download update terbaru</p>
    </div>

    <div class="tabs">
      <div class="tab active" data-tab="download">Download</div>
      <div class="tab" data-tab="admin">Admin Login</div>
    </div>

    <div class="tab-content active" id="download-tab">
      <div class="box">
        <div class="input-group">
          <label for="apikey"><i class="fas fa-key"></i> Masukkan API Key</label>
          <input type="password" id="apikey" class="input-field" placeholder="Masukkan kunci akses Anda" autocomplete="off">
        </div>

        <button class="btn" onclick="cekApiKey()">
          <i class="fas fa-unlock"></i> Verifikasi & Download
        </button>

        <div class="progress-bar" id="progressBar">
          <div class="progress" id="progress"></div>
        </div>

        <a href="#" class="download-link" id="downloadLink" style="display: none;">
          <i class="fas fa-download"></i> Download Update Bot
        </a>
      </div>
    </div>

    <div class="tab-content" id="admin-tab">
      <div class="box" id="adminLoginForm">
        <h2 style="margin-bottom: 20px; text-align: center;"><i class="fas fa-lock"></i> Admin Login</h2>

        <div class="input-group">
          <label for="adminUsername">Username</label>
          <input type="text" id="adminUsername" class="input-field" placeholder="Masukkan username admin">
        </div>

        <div class="input-group">
          <label for="adminPassword">Password</label>
          <input type="password" id="adminPassword" class="input-field" placeholder="Masukkan password admin">
        </div>

        <button class="btn" onclick="adminLogin()">
          <i class="fas fa-sign-in-alt"></i> Login sebagai Admin
        </button>
      </div>

      <div class="admin-only" id="adminPanel">
        <div class="box">
          <h2 style="margin-bottom: 20px; text-align: center;"><i class="fas fa-plus-circle"></i> Tambah API Key Baru</h2>

          <div class="input-group">
            <label for="newKeyName">Nama Pengguna</label>
            <input type="text" id="newKeyName" class="input-field" placeholder="Contoh: Key untuk Budi">
          </div>

          <div class="input-group">
            <label for="keyIp">IP Address (opsional)</label>
            <input type="text" id="keyIp" class="input-field" placeholder="Kosongkan untuk IP saat ini">
          </div>

          <button class="btn btn-success" onclick="generateApiKey()">
            <i class="fas fa-key"></i> Generate API Key Baru
          </button>
        </div>

        <div class="box">
          <h2 style="margin-bottom: 20px; text-align: center;"><i class="fas fa-list"></i> API Key Aktif</h2>

          <div class="api-keys-list" id="apiKeysList">
            <!-- Daftar API Key akan dimuat di sini -->
          </div>
        </div>
      </div>
    </div>

    <div class="footer">
      <p>©alipai | IP Anda: <span id="userIp">Loading...</span></p>
    </div>
  </div>

  <div class="notification" id="notification">
    <i class="fas fa-exclamation-circle"></i> <span id="notificationText"></span>
  </div>

  <script>
    // Informasi admin
    const adminCredentials = {
      username: "alipclutch",
      password: "clutch555"
    };

    // Simulasi database API Key dengan penyimpanan permanen
    let apiKeys = JSON.parse(localStorage.getItem('botAlipApiKeys')) || [];
    if (!Array.isArray(apiKeys)) {
      apiKeys = []; // Pastikan apiKeys selalu array
      localStorage.setItem('botAlipApiKeys', JSON.stringify(apiKeys));
    }

    // Dapatkan IP pengguna (simulasi)
    let userIp = "192.168.1." + Math.floor(Math.random() * 100 + 1);
    document.getElementById('userIp').textContent = userIp;

    // Status login admin
    let isAdminLoggedIn = false;

    // Elemen UI
    const apiKeyInput = document.getElementById('apikey');
    const downloadLinkElement = document.getElementById('downloadLink');
    const notification = document.getElementById('notification');
    const notificationText = document.getElementById('notificationText');
    const apiKeysList = document.getElementById('apiKeysList');
    const tabs = document.querySelectorAll('.tab');
    const tabContents = document.querySelectorAll('.tab-content');
    const adminLoginForm = document.getElementById('adminLoginForm');
    const adminPanel = document.getElementById('adminPanel');
    const bgAnimation = document.getElementById('bg-animation');
    const progressBar = document.getElementById('progressBar');
    const progress = document.getElementById('progress');

    // Inisialisasi
    document.addEventListener('DOMContentLoaded', function() {
      createBackgroundAnimation();
      loadApiKeys();
      setupTabs();

      // Cek jika admin sudah login
      checkAdminStatus();
    });

    // Setup tabs
    function setupTabs() {
      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          const tabId = tab.getAttribute('data-tab');

          // Deactivate all tabs
          tabs.forEach(t => t.classList.remove('active'));
          tabContents.forEach(tc => tc.classList.remove('active'));

          // Activate current tab
          tab.classList.add('active');
          document.getElementById(`${tabId}-tab`).classList.add('active');
        });
      });
    }

    // Create background animation
    function createBackgroundAnimation() {
      for (let i = 0; i < 15; i++) {
        const span = document.createElement('span');
        const size = Math.random() * 20 + 10;
        const posX = Math.random() * 100;
        const duration = Math.random() * 10 + 10;
        const delay = Math.random() * 5;

        span.style.width = `${size}px`;
        span.style.height = `${size}px`;
        span.style.left = `${posX}%`;
        span.style.animationDuration = `${duration}s`;
        span.style.animationDelay = `${delay}s`;

        bgAnimation.appendChild(span);
      }
    }

    // Show notification
    function showNotification(message, isError = true) {
      notificationText.textContent = message;
      notification.className = isError ? 'notification' : 'notification success';
      notification.classList.add('show');

      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }

    // Cek status admin
    function checkAdminStatus() {
      const adminStatus = localStorage.getItem('botAlipAdminLoggedIn');
      if (adminStatus === 'true') {
        isAdminLoggedIn = true;
        adminLoginForm.style.display = 'none';
        adminPanel.classList.add('visible');
      }
    }

    // Login admin
    function adminLogin() {
      const username = document.getElementById('adminUsername').value.trim();
      const password = document.getElementById('adminPassword').value;

      if (!username || !password) {
        showNotification("❌ Harap isi username dan password!");
        return;
      }

      if (username === adminCredentials.username && password === adminCredentials.password) {
        isAdminLoggedIn = true;
        localStorage.setItem('botAlipAdminLoggedIn', 'true');

        adminLoginForm.style.display = 'none';
        adminPanel.classList.add('visible');

        showNotification("✅ Login admin berhasil!", false);
      } else {
        showNotification("❌ Username atau password salah!");
      }
    }

    // Generate API Key baru (hanya admin)
    function generateApiKey() {
      if (!isAdminLoggedIn) {
        showNotification("❌ Hanya admin yang dapat menambahkan API Key!");
        return;
      }

      const keyName = document.getElementById('newKeyName').value.trim();
      let keyIp = document.getElementById('keyIp').value.trim();

      if (!keyName) {
        showNotification("❌ Harap beri nama untuk API Key!");
        return;
      }

      // Jika IP kosong, gunakan IP pengguna saat ini
      if (!keyIp) {
        keyIp = userIp;
      }

      // Generate random API Key
      const newKey = 'alip_' + Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);

      // Simpan key dengan IP
      apiKeys.push({
        key: newKey,
        name: keyName,
        ip: keyIp,
        createdAt: new Date().toLocaleDateString('id-ID'),
        createdBy: userIp
      });

      // Simpan ke localStorage (permanen)
      localStorage.setItem('botAlipApiKeys', JSON.stringify(apiKeys));

      // Reload daftar key
      loadApiKeys();

      // Reset form
      document.getElementById('newKeyName').value = '';
      document.getElementById('keyIp').value = '';

      showNotification("✅ API Key berhasil dibuat! Salin dan simpan di tempat aman.", false);
    }

    // Load API Keys ke dalam list
    function loadApiKeys() {
      apiKeysList.innerHTML = '';

      if (apiKeys.length === 0) {
        apiKeysList.innerHTML = '<div class="api-key-item"><div class="key-info">Belum ada API Key</div></div>';
        return;
      }

      // Tampilkan semua API Key (tidak difilter berdasarkan IP)
      apiKeys.forEach((keyData, index) => {
        const keyItem = document.createElement('div');
        keyItem.className = 'api-key-item';

        keyItem.innerHTML = `
          <div class="key-info">
            <div class="key-value">${keyData.key}</div>
            <div class="key-meta">${keyData.name} | IP: ${keyData.ip} | Dibuat: ${keyData.createdAt}</div>
          </div>
          <div class="key-actions">
            <button class="key-btn" onclick="copyToClipboard('${keyData.key}')"><i class="fas fa-copy"></i></button>
            <button class="key-btn" style="background: var(--danger)" onclick="deleteApiKey(${index})"><i class="fas fa-trash"></i></button>
          </div>
        `;

        apiKeysList.appendChild(keyItem);
      });
    }

    // Salin key ke clipboard
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text).then(() => {
        showNotification("✅ API Key disalin ke clipboard!", false);
      }).catch(err => {
        showNotification("❌ Gagal menyalin API Key");
      });
    }

    // Hapus API Key (hanya admin)
    function deleteApiKey(index) {
      if (!isAdminLoggedIn) {
        showNotification("❌ Hanya admin yang dapat menghapus API Key!");
        return;
      }

      if (index >= 0 && index < apiKeys.length) {
        // Hapus API Key berdasarkan index
        apiKeys.splice(index, 1);
        localStorage.setItem('botAlipApiKeys', JSON.stringify(apiKeys));
        loadApiKeys();
        showNotification("✅ API Key berhasil dihapus!", false);
      }
    }

    // Cek API Key untuk download
    function cekApiKey() {
      let key = apiKeyInput.value.trim();

      if (key === "") {
        showNotification("❌ Harap masukkan API Key!");
        return;
      }

      // Cek apakah key valid (tanpa memeriksa IP)
      const validKey = apiKeys.find(k => k.key === key);

      if (validKey) {
        // Tampilkan progress bar
        progressBar.style.display = 'block';
        
        // Simulasi proses download
        let progressValue = 0;
        const interval = setInterval(() => {
          progressValue += 5;
          progress.style.width = `${progressValue}%`;
          
          if (progressValue >= 100) {
            clearInterval(interval);
            
            // Download file langsung dari GitHub
            downloadFromGitHub();
            
            // Sembunyikan progress bar setelah 1 detik
            setTimeout(() => {
              progressBar.style.display = 'none';
              progress.style.width = '0%';
            }, 1000);
            
            showNotification("✅ Download berhasil!", false);
          }
        }, 100);
      } else {
        showNotification("❌ API Key tidak valid!");

        // Shake animation for invalid input
        apiKeyInput.style.borderColor = 'var(--danger)';
        setTimeout(() => {
          apiKeyInput.style.borderColor = 'rgba(108, 92, 231, 0.3)';
        }, 1000);
      }
    }

    // Download file langsung dari GitHub tanpa membuka repo
    function downloadFromGitHub() {
      // URL langsung ke file ZIP di GitHub
      const githubUrl = "https://github.com/alifalfrl/alipaiv4/archive/refs/heads/main.zip";
      
      // Membuat elemen <a> sementara untuk trigger download
      const a = document.createElement('a');
      a.href = githubUrl;
      a.download = 'bot_alip_update.zip'; // Nama file saat didownload
      a.style.display = 'none';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }

// Allow Enter key to submit
apiKeyInput.addEventListener('keypress', function(e) {
  if (e.key === 'Enter') {
    cekApiKey();
  }
});

// Link Channel Bot (simple biru + logo WA)
const channelBox = document.createElement("div");
channelBox.innerHTML = `
  <div style="
    margin-top:20px; 
    text-align:center; 
    padding:15px; 
    border-radius:12px; 
    background:#007BFF; 
    color:white; 
    box-shadow:0 4px 10px rgba(0,0,0,0.2);
    animation: fadeIn 1s ease-in-out;
  ">
    <h3 style="margin:0; font-size:18px; font-weight:600;">INFO UPDT ALIP AI</h3>
    <a href="https://whatsapp.com/channel/0029VbAnsaJFMqrTf5IwPJ3X" 
       target="_blank" 
       style="display:inline-flex; align-items:center; gap:8px;
              margin-top:12px; padding:10px 20px; 
              background:white; color:#007BFF; font-weight:600; 
              text-decoration:none; border-radius:8px; 
              transition:all 0.3s ease;">
      <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" 
           alt="WA" width="20" height="20">
      Ikuti Channel
    </a>
  </div>

  <style>
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    a:hover {
      background: #007BFF !important;
      color: white !important;
      transform: scale(1.05);
      box-shadow: 0 4px 10px rgba(0,123,255,0.5);
    }
    a:hover img {
      filter: brightness(0) invert(1);
    }
  </style>
`;
apiKeyInput.parentNode.appendChild(channelBox);
  </script>
</body>
</html>
